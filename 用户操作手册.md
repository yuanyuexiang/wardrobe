# 衣橱APP 用户操作手册

## 📱 应用简介

衣橱APP是一款基于React Native和Expo开发的服装商品管理应用，支持iOS、Android和Web平台。应用连接Directus后端系统，提供商品浏览、分类管理、店铺信息展示等功能。

**核心特性**：
- 🛍️ 商品浏览和详情查看
- 🏪 店铺信息管理
- 📱 设备授权系统
- 🎠 自动轮播模式（专用设备）
- 📋 双层/单层商品布局切换
- 📱 浮动二维码展示
- 🔄 实时数据更新

## 🚀 快速入门

### 设备自动授权流程

应用采用设备自动注册和授权机制，无需手动配置：

#### 首次启动流程：
1. **自动设备检测**：
   - 应用启动时自动获取设备信息（型号、ID、系统版本等）
   - 向服务器提交设备注册请求
   - 显示"正在检查设备状态..."

2. **等待管理员授权**：
   - 设备信息提交后显示"等待授权"状态
   - 管理员在后台系统中审核和批准设备
   - 可指定设备用途：交互模式或轮播模式

3. **自动进入应用**：
   - 授权通过后应用自动获取店铺信息
   - 根据设备用途自动配置界面
   - 轮播设备自动进入全屏轮播模式
   - 交互设备进入正常商品浏览界面

## 📋 主要功能界面

### 1. 商品页面（主页）

**功能概述**：浏览和管理商品的核心页面

#### 界面布局：
- **顶部区域**：店铺信息展示
  - 店铺名称和评分
  - 轮播按钮：查看所有商品轮播
  - 布局切换按钮：切换单层/双层显示
- **分类导航**：水平滚动的商品分类标签
  - "推荐商品"：显示最新5件商品
  - 其他分类：按商品类别筛选
- **商品列表**：支持两种布局模式
  - 单层水平滚动：传统横向浏览
  - 双层网格布局：上下两行同时展示
- **浮动二维码**：可拖拽的店铺二维码

#### 操作方法：
1. **浏览商品**：
   - 左右滑动查看更多商品
   - 每张卡片显示商品图片、名称、描述
   
2. **分类筛选**：
   - 点击顶部分类标签切换不同类别商品
   - "推荐商品"显示按时间排序的最新5件商品
   
3. **查看详情**：
   - 点击任意商品卡片进入商品详情页
   
4. **布局切换**：
   - 点击布局切换按钮（网格/列表图标）
   - 单层模式：传统水平滚动
   - 双层模式：上下两行网格展示
   
5. **轮播模式**：
   - 点击"轮播"按钮开启全屏商品展示
   - 自动切换商品图片，10秒间隔更新
   - 适合店铺展示和演示用途
   
6. **浮动二维码**：
   - 屏幕上的可拖拽二维码组件
   - 点击展开/收起二维码
   - 拖拽到任意位置
   - 扫码直接访问店铺网页
   
7. **下拉刷新**：
   - 在商品列表区域下拉可刷新商品数据
   - 应用会自动定时更新数据（30秒间隔）

### 2. 商品详情页面

**功能概述**：查看单个商品的详细信息

#### 界面元素：
- **图片展示区**：
  - 主图片展示（支持多图片横滑）
  - 圆点指示器显示图片数量
  - 点击图片可全屏预览
- **商品信息区**：
  - 商品名称和价格
  - 商品描述
  - 分类信息

#### 操作方法：
1. **浏览图片**：
   - 左右滑动查看多张商品图片
   - 点击图片进入全屏预览模式
   
2. **全屏预览**：
   - 支持手势缩放和滑动
   - 点击空白区域退出全屏
   
3. **返回**：
   - 使用顶部返回按钮回到商品列表

### 3. 商家页面

**功能概述**：展示店铺详细信息和相关内容

#### 界面内容：
- 店铺基本信息
- 店铺图片展示
- 联系方式和地址
- 经营状态

#### 操作方法：
1. **查看店铺信息**：
   - 滚动页面查看完整店铺资料
   - 点击图片可放大查看
   
2. **图片预览**：
   - 点击店铺图片进入全屏预览
   - 支持多图片浏览

### 4. 调试页面（开发用）

**功能概述**：用于测试网络连接和配置管理

#### 主要功能：
- **网络测试**：测试API连接状态
- **配置管理**：
  - 进入配置页面
  - 重置配置并重新设置
- **状态信息**：显示当前连接和配置状态
- **设备信息**：显示当前设备的授权状态和用途

### 5. 设备授权系统

**功能概述**：基于设备信息的自动授权和模式管理

#### 工作原理：
- 应用启动时自动检测设备信息
- 向服务器注册设备并获取授权
- 根据设备用途自动进入相应模式

#### 设备模式：
1. **交互模式（默认）**：
   - 完整的用户界面
   - 支持所有手动操作
   - 显示所有按钮和控件
   
2. **轮播模式（专用设备）**：
   - 启动后自动进入轮播模式
   - 隐藏大部分用户界面
   - 专为展示和演示设计
   - 自动数据更新和轮播

#### 授权状态：
- **等待授权**：设备已注册，等待管理员批准
- **已授权**：设备获得访问权限，可正常使用
- **被拒绝**：设备被拒绝访问

## ⚙️ 设置和配置

### 设备管理

应用基于设备授权系统运行，配置方式如下：

1. **设备重新授权**：
   - 如需更换店铺或重置设备
   - 联系管理员在后台修改设备授权信息
   - 重启应用以获取新的授权配置
   
2. **设备用途变更**：
   - 交互模式 ↔ 轮播模式切换
   - 需要管理员在后台修改设备用途设置
   - 重启应用后自动生效

3. **调试和测试**：
   - 使用调试页面查看设备授权状态
   - 测试网络连接和数据获取
   - 查看当前设备的店铺绑定信息

### 应用设置说明

- **数据缓存**：应用会缓存商品图片以提升加载速度
- **自动更新**：
  - 商品列表每30秒自动更新
  - 轮播模式每10秒更新
  - 支持手动下拉刷新
- **设备授权**：每台设备需要独立授权才能使用
- **离线浏览**：已加载的商品可离线查看
- **多设备管理**：支持不同设备设置不同用途（交互/轮播）
- **浮动二维码**：可自由拖拽，位置会自动保存

## 🔧 常见问题解决

### 连接问题

**问题**：无法连接到服务器
**解决方法**：
1. 检查网络连接是否正常
2. 确认API地址格式正确（包含http://或https://）
3. 验证认证Token是否有效
4. 使用调试页面测试连接

**问题**：商品加载失败
**解决方法**：
1. 下拉刷新商品列表
2. 检查网络状态
3. 重新进入应用
4. 如持续出现，尝试重新配置

### 显示问题

**问题**：商品图片不显示
**解决方法**：
1. 检查网络连接
2. 等待图片加载完成
3. 重新进入页面

**问题**：商品列表为空
**解决方法**：
1. 确认选择的店铺有商品数据
2. 尝试切换不同分类
3. 检查用户权限设置

### 配置问题

**问题**：找不到店铺列表
**解决方法**：
1. 确认用户账户有创建店铺的权限
2. 检查认证Token权限范围
3. 联系管理员确认账户设置

### 设备授权问题

**问题**：设备显示"等待授权"
**解决方法**：
1. 设备信息已提交给管理员
2. 等待管理员在后台批准设备
3. 联系管理员加快审批流程

**问题**：轮播模式无法退出
**解决方法**：
1. 轮播设备会自动隐藏退出按钮
2. 联系管理员修改设备用途
3. 使用调试页面查看设备状态

### 功能问题

**问题**：二维码拖拽有问题
**解决方法**：
1. 确保使用最新版本应用
2. 重启应用尝试
3. 二维码支持自由拖拽到任意位置

**问题**：数据更新不及时
**解决方法**：
1. 应用有自动更新机制（30秒间隔）
2. 手动下拉刷新商品列表
3. 检查网络连接状态

## 📞 技术支持

### 应用信息
- **版本**：1.0.0
- **平台支持**：iOS、Android、Web
- **技术架构**：React Native + Expo + GraphQL + Apollo Client
- **核心库**：
  - Expo SDK 53.0.22
  - React Native Draggable 3.3.0
  - Apollo Client 3.14.0
  - Expo Device 8.0.8

### 系统要求
- **iOS**：iOS 13.0或更高版本
- **Android**：Android 6.0 (API level 23)或更高版本
- **Web**：现代浏览器（Chrome、Safari、Firefox、Edge）
- **网络**：需要稳定的互联网连接
- **权限**：设备信息读取权限（用于设备授权）

### 获取帮助
如遇到问题无法解决，请：
1. 截图记录错误信息
2. 使用调试页面获取状态信息
3. 联系技术支持团队

---

*本手册基于衣橱APP v1.0.0编写，如有更新请以最新版本为准。*